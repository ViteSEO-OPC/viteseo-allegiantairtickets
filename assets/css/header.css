/* ===== Vars ===== */
:root{
  --nav-accent:#e93a1b;
  --panel-bg:#ededed;

  /* FX */
  --fx-dur:.44s;
  --fx-step:36ms;
  --fx-line-dur:.15s;
  --fx-line-delay:.08s;
  --fx-ease:cubic-bezier(.2,.7,0,1);
  --fx-shift:1.15em;
  --fx-underline-gap:.28em;

  /* Wave */
  --wave-w:1.75em;
  --wave-thick:3px;
  --wave-soften:4px;
}


/* ===== Navbar ===== */
header.wp-block-template-part,
.page-header {
  position: sticky;
  top: 0;
  z-index: 10000;
  overflow: visible;
  background: #FDCD3B !important;
}

#navbar,
#navbar.navbar,
#navbar.navbar.navbar-light {
  position: sticky;
  top: 0;
  z-index: 10001;
  background-color: #FDCD3B !important;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
}
.admin-bar #navbar,
.admin-bar header.wp-block-template-part { top: 32px; }
@media (max-width:782px){
  .admin-bar #navbar,
  .admin-bar header.wp-block-template-part { top: 46px; }
}

:root { --navbar-h: 85px; }

/* Gutters so logo isn't glued to the edge */
#navbar .container{
  max-width:100%;
  padding-left:var(--page-gutter-left);
  padding-right:var(--page-gutter-right);
}

/* Brand */
.brand-link{
  margin-right:clamp(16px,4vw,56px);
  text-decoration:none; color:inherit;
}
.brand-logo{
  height:clamp(28px,4.5vw,36px); width:auto; display:block;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.4)) drop-shadow(0 0 2px rgba(0,0,0,.2));
}

/* Nav items */
#navbar .nav-link{
  border-radius:.6rem;
  padding:.45rem 1rem;
  font-size:var(--wp--preset--font-size--body);
  color:var(--wp--preset--color--ink);
  transition:color .15s ease, background-color .15s ease;
  outline: none;
}
#navbar .nav-item .nav-link.active,
#navbar .nav-item.show > .nav-link{
  background:var(--nav-accent); color:#fff !important;
}

/* top-level links own the effect */
#navbar .navbar-nav > .nav-item > .nav-link{
  position:relative; text-decoration:none !important;
}

/* wrapper owns underline (not clipped) */
#navbar .nav-link .fx-wrap{
  position:relative; display:inline-block; isolation:isolate;
}

/* stack clips the text swap only */
#navbar .nav-link .fx-stack{
  position:relative; display:inline-block;
  height:1em; line-height:.7em; overflow:hidden;
  vertical-align:-.05em;
  -webkit-font-smoothing:antialiased;
  text-shadow:0 var(--fx-shift) 0 currentColor;
}

/* layers */
#navbar .nav-link .fx-top,
#navbar .nav-link .fx-bottom{ display:block; white-space:nowrap; }

/* per-letter units */
#navbar .nav-link .fx-char{
  display:inline-block; will-change:transform;
  transition:transform var(--fx-dur) var(--fx-ease);
  transition-delay:calc(var(--i) * var(--fx-step));
  transform:translateY(var(--y,0));
}
#navbar .nav-link .fx-top .fx-char{ --y:0; }
#navbar .nav-link .fx-bottom{
  position:absolute; left:0; top:0; color:var(--nav-accent);
}
#navbar .nav-link .fx-bottom .fx-char{ --y:var(--fx-shift); }

/* hover */
#navbar .nav-link:hover .fx-top {
  color: #d42203;
}

/* underline + moving crest */
#navbar .nav-link .fx-wrap::after{
  content:""; position:absolute; left:0; right:0;
  bottom:calc(-1 * var(--fx-underline-gap));
  height:var(--wave-thick); background:var(--nav-accent);
  transform:scaleX(0); transform-origin:left center;
  pointer-events:none; z-index:1;
}
#navbar .nav-link .fx-wrap::before{
  content:""; position:absolute; left:0; right:0;
  bottom:calc(-1 * var(--fx-underline-gap));
  height:var(--wave-thick); pointer-events:none; opacity:0; z-index:2;
  background-image:radial-gradient(50% 220% at 0% 50%, var(--nav-accent) 0 55%, transparent 56%);
  background-repeat:no-repeat; background-size:var(--wave-w) 100%;
  background-position:0 0; filter:blur(var(--wave-soften));
  will-change:background-position, opacity;
}

#navbar .nav-link:hover .fx-wrap::after{
  animation:fx-underline var(--fx-dur) var(--fx-ease) var(--fx-line-delay) forwards;
}
#navbar .nav-link:focus-visible .fx-wrap::after{
  animation:fx-underline var(--fx-line-dur) var(--fx-ease) 0s forwards;
}
#navbar .nav-link:hover .fx-wrap::before,
#navbar .nav-link:focus-visible .fx-wrap::before{
  opacity:1;
  animation:fx-underline-wave var(--fx-dur) var(--fx-ease) var(--fx-line-delay) forwards;
}

/* Dropdown */
#navbar .dropdown-menu{
  background:var(--panel-bg);
  border:0; border-radius:.5rem; padding:.5rem;
  box-shadow:0 8px 24px rgba(0,0,0,.08);
  min-width:16rem;
}
#navbar .dropdown-item{
  border-radius:.35rem; padding:.6rem .9rem;
  font-size:var(--wp--preset--font-size--body);
  line-height:1.25;
}
#navbar .dropdown-item:hover{ text-decoration:underline !important; color: #FD593C;}

.navbar nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.navbar button {
  display: flex;
  align-items: center;
  font-size: 16px;
  font-weight: bold;
  padding: 14px 20px;
  border-radius: 10px;
  color: white;
  backdrop-filter: blur(5px);
  transition: background 0.3s;
}

/* --- Destination (dropdown) requirements --- */

/* 1) No underline animation for dropdown triggers */
@media (hover:hover) and (pointer:fine){
  #navbar .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle)::after{
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: calc(-1 * var(--fx-underline-gap));
    height: var(--wave-thick);
    background: tomato;
    transform: scaleX(0);
    transform-origin: left center;
    transition: transform var(--fx-dur) var(--fx-ease);
    pointer-events: none;
  }
  #navbar .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle):hover::after,
  #navbar .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle):focus-visible::after{
    transform: scaleX(1);
  }
}

/* 2) Destination (dropdown toggle) hover = red, no underline */
@media (hover:hover) and (pointer:fine){
  #navbar .nav-item.dropdown > .nav-link.dropdown-toggle{
    position: relative;
  }
  #navbar .nav-item.dropdown > .nav-link.dropdown-toggle:hover,
  #navbar .nav-item.dropdown > .nav-link.dropdown-toggle:focus-visible{
    color: tomato !important;
  }
}

/* 3) Caret indicator for dropdown; rotates when open */
#navbar .nav-item.dropdown > .nav-link.dropdown-toggle::after{
  content: "";
  display: inline-block;
  margin-left: .4rem;
  vertical-align: .1em;
  border-top: .45em solid currentColor;
  border-right: .4em solid transparent;
  border-left: .4em solid transparent;
  transition: transform .2s ease;
}
#navbar .nav-item.dropdown.show > .nav-link.dropdown-toggle::after{
  transform: rotate(180deg);
}

/* --- Universal hover color for top-level links (non-active) --- */
#navbar .navbar-nav > .nav-item > .nav-link:not(.active):hover,
.navbar .navbar-nav > .nav-item > .nav-link:not(.active):hover{
  color: tomato !important;
}

/* Keep your fx variant but don't rely on it being in the markup */
#navbar .nav-link:hover .fx-top,
.navbar .nav-link:hover .fx-top{
  color: tomato;
}

/* --- Ensure dropdown toggles align with the same hover color --- */
#navbar .nav-item.dropdown > .nav-link.dropdown-toggle:hover,
#navbar .nav-item.dropdown > .nav-link.dropdown-toggle:focus-visible,
.navbar .nav-item.dropdown > .nav-link.dropdown-toggle:hover,
.navbar .nav-item.dropdown > .nav-link.dropdown-toggle:focus-visible{
  color: tomato !important;
}

/* This is start header-community */
.nav-login-icon {
    font-size: 1.1rem;
    color: #fd593c;
}

.btn-login {
    background-color: #fd593c;
    border: none;
    border-radius: 999px;
    padding: 0.35rem 1.8rem;
    font-size: 0.9rem;
    font-weight: 500;
    color: #ffdd55;
}

.btn-login:hover,
.btn-login:focus {
    background-color: #ff6c46;
    color: #fff7b0;
}

.nav-login-icon-link {
  text-decoration: none;
  display: inline-flex;
  align-items: center;
}

/* This is end header-community */

/* Optional: if you want the underline AND tomato text together on hover */
@media (hover:hover) and (pointer:fine){
  #navbar .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle):hover::after,
  .navbar .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle):hover::after{
    transform: scaleX(1);
    background: tomato;
  }
}

/* Force hamburger between 1400 and 1461.98 */
@media (min-width:1400px) and (max-width:1461.98px){
  /* Show the burger in this band */
  .navbar-expand-xxl .navbar-toggler{ display:block !important; }

  /* Neutralize Bootstrap's xxl expand */
  .navbar-expand-xxl .navbar-collapse{
    display:block !important;          /* beat display:flex !important */
    flex-basis:100% !important;         /* full width when opened */
  }

  /* Closed by default */
  #navbarMain.collapse{ display:none !important; }

  /* Visible when toggled + during animation */
  #navbarMain.collapse.show,
  #navbarMain.collapsing{ display:block !important; }

  /* Vertical stack when open */
  .navbar-expand-xxl .navbar-nav{ flex-direction:column; gap:.5rem; }
}


/* Keep your existing <=1461 visual tweaks */
@media (max-width:1461.98px){
  #navbar .dropdown-menu{ position:static; float:none; box-shadow:none; width:100%; margin-top:.5rem; }
  #navbar .nav-link{ color:#000 !important; background:transparent !important; }
  #navbar .nav-link .fx-char{ transition:none !important; transform:none !important; }
  #navbar .nav-link .fx-stack{ height:auto; line-height:1.1em; overflow:visible; text-shadow:none !important; }
  #navbar .nav-link .fx-bottom{ display:none !important; }
  #navbar .nav-link .fx-wrap::before,
  #navbar .nav-link .fx-wrap::after{ display:none !important; animation:none !important; }
  #navbar .nav-link:active,
  #navbar .nav-link:focus,
  #navbar .nav-link:focus-visible{ color:tomato !important; background:transparent !important; }
  #navbar .nav-item .nav-link.active,
  #navbar .nav-item.show > .nav-link{ color:#fff !important; background:tomato !important; }
}

/* Collapsed behavior <=1461: full-width stack, left aligned */
@media (max-width:1461.98px){
  #navbar .navbar-collapse{ width:100%; }
  #navbar .navbar-nav{ align-items:flex-start; }
  #navbar .dropdown-menu{ position:static; float:none; box-shadow:none; width:100%; margin-top:.5rem; }
}

/* Keyframes */
@keyframes fx-underline{ from{ transform:scaleX(0); } to{ transform:scaleX(1); } }
@keyframes fx-underline-wave{ from{ background-position:0 0; } to{ background-position:100% 0; } }

@media (max-width: 991.98px){
  #navbar .nav-link .fx-char{
    transition:none !important;
    transform:none !important;
  }
  #navbar .nav-link .fx-stack{
    text-shadow:none !important;
    height:auto;
    line-height:1.1em;
  }
  #navbar .nav-link .fx-bottom{
    position:static;
    color:inherit;
  }
  #navbar .nav-link .fx-wrap::before,
  #navbar .nav-link .fx-wrap::after{
    display:none !important;
    animation:none !important;
  }
  #navbar .nav-link:active,
  #navbar .nav-link:focus,
  #navbar .nav-link:focus-visible{
    color:tomato !important;
  }
}

/* <1462: collapsed */
@media (max-width:1461.98px){
  .navbar-expand-1462 .navbar-toggler{ display:block; }
  .navbar-expand-1462 .navbar-collapse.collapse{ display:none; }
  .navbar-expand-1462 .navbar-collapse.collapse.show,
  .navbar-expand-1462 .navbar-collapse.collapsing{ display:block; }
  .navbar-expand-1462 .navbar-nav{ flex-direction:column; gap:.5rem; }
  .navbar-expand-1462 .dropdown-menu{ position:static; box-shadow:none; width:100%; margin-top:.5rem; }
}

/* >=1462: desktop inline */
@media (min-width:1462px){
  .navbar-expand-1462{ flex-wrap:nowrap; }
  .navbar-expand-1462 .navbar-toggler{ display:none !important; }
  .navbar-expand-1462 .navbar-collapse{
    display:flex !important;
    flex-basis:auto !important;
  }
  .navbar-expand-1462 .navbar-nav{
    flex-direction:row !important;
    align-items:center;
  }
  .navbar-expand-1462 .navbar-nav .nav-link{
    padding-right:.5rem;
    padding-left:.5rem;
  }
  .navbar-expand-1462 .dropdown-menu{
    position:absolute;
    float:none;
    box-shadow:0 8px 24px rgba(0,0,0,.08);
    width:auto;
    margin-top:0;
  }
}

/* >=1462: desktop dropdown should not affect layout */
@media (min-width:1462px){
  #navbar.navbar-expand-1462 .nav-item.dropdown{ position:relative; }

  #navbar.navbar-expand-1462 .nav-item.dropdown > .dropdown-menu{
    position:absolute;
    top:100%;
    left:0;
    margin:0;
    display:block;
    opacity:0;
    visibility:hidden;
    transform:translateY(8px);
    transition:opacity .2s ease, transform .2s ease, visibility 0s linear .2s;
  }

  #navbar.navbar-expand-1462 .nav-item.dropdown:hover   > .dropdown-menu,
  #navbar.navbar-expand-1462 .nav-item.dropdown:focus-within > .dropdown-menu{
    opacity:1;
    visibility:visible;
    transform:none;
    transition-delay:0s;
  }

  #navbar.navbar-expand-1462 .navbar-collapse{ align-items:center; }
  #navbar.navbar-expand-1462 #navbarMain > .navbar-nav{ margin-top:0; margin-bottom:0; }
}
